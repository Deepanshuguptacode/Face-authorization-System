<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Threshold Comparison - Face Recognition Results</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .threshold-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .threshold-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            transition: transform 0.3s;
        }
        
        .threshold-card:hover {
            transform: translateY(-5px);
        }
        
        .threshold-card.best {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            box-shadow: 0 10px 30px rgba(56, 239, 125, 0.4);
        }
        
        .threshold-card.worst {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }
        
        .threshold-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .accuracy-value {
            font-size: 1.5em;
            margin: 10px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            background: rgba(255,255,255,0.3);
            font-size: 0.8em;
            margin-top: 10px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: white;
        }
        
        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table tr:hover {
            background: #f5f5f5;
        }
        
        .comparison-table tr.best-row {
            background: #d4edda;
            font-weight: bold;
        }
        
        .comparison-table tr.worst-row {
            background: #f8d7da;
        }
        
        .metric-high {
            color: #27ae60;
            font-weight: bold;
        }
        
        .metric-medium {
            color: #f39c12;
            font-weight: bold;
        }
        
        .metric-low {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .section-title {
            color: #667eea;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .chart-placeholder {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }
        
        .insights-box {
            background: #e7f3ff;
            border-left: 5px solid #2196F3;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .insights-box h3 {
            color: #1976D2;
            margin-bottom: 15px;
        }
        
        .insights-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .insights-box li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }
        
        .insights-box li:before {
            content: "📊";
            position: absolute;
            left: 0;
        }
        
        .dataset-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            color: #666;
        }
        
        .star-icon {
            color: #ffd700;
            font-size: 1.5em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Multi-Threshold Comparison Analysis</h1>
            <p>Comprehensive Face Recognition Performance Evaluation</p>
            <p style="font-size: 0.9em; opacity: 0.9;">Thresholds: 0.30, 0.35, 0.40, 0.50, 0.60</p>
        </div>
        
        <div class="content">
            <!-- Quick Overview Cards -->
            <h2 class="section-title">Quick Overview - Dataset 1</h2>
            <div class="threshold-grid">
                <div class="threshold-card best">
                    <div class="threshold-value">0.30 <span class="star-icon">★</span></div>
                    <div class="accuracy-value">97.50%</div>
                    <div class="badge">BEST</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Optimal Balance</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.35</div>
                    <div class="accuracy-value">96.50%</div>
                    <div class="badge">EXCELLENT</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">High Performance</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.40</div>
                    <div class="accuracy-value">93.50%</div>
                    <div class="badge">GOOD</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Still Viable</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.50</div>
                    <div class="accuracy-value">80.00%</div>
                    <div class="badge">MODERATE</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Declining</p>
                </div>
                <div class="threshold-card worst">
                    <div class="threshold-value">0.60</div>
                    <div class="accuracy-value">65.50%</div>
                    <div class="badge">POOR</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Not Recommended</p>
                </div>
            </div>
            
            <h2 class="section-title">Quick Overview - Dataset 2</h2>
            <div class="threshold-grid">
                <div class="threshold-card best">
                    <div class="threshold-value">0.30 <span class="star-icon">★</span></div>
                    <div class="accuracy-value">98.00%</div>
                    <div class="badge">BEST</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Optimal Balance</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.35</div>
                    <div class="accuracy-value">96.50%</div>
                    <div class="badge">EXCELLENT</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">High Performance</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.40</div>
                    <div class="accuracy-value">92.50%</div>
                    <div class="badge">GOOD</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Still Viable</p>
                </div>
                <div class="threshold-card">
                    <div class="threshold-value">0.50</div>
                    <div class="accuracy-value">79.50%</div>
                    <div class="badge">MODERATE</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Declining</p>
                </div>
                <div class="threshold-card worst">
                    <div class="threshold-value">0.60</div>
                    <div class="accuracy-value">69.50%</div>
                    <div class="badge">POOR</div>
                    <p style="margin-top: 10px; font-size: 0.9em;">Not Recommended</p>
                </div>
            </div>
            
            <!-- Detailed Comparison Table - Dataset 1 -->
            <div class="dataset-section">
                <h2 class="section-title">📊 Dataset 1 - Detailed Metrics Comparison</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Threshold</th>
                            <th>Accuracy</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1 Score</th>
                            <th>TP</th>
                            <th>FN</th>
                            <th>FP</th>
                            <th>TN</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="best-row">
                            <td><strong>0.30</strong></td>
                            <td class="metric-high">97.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-high">95.00%</td>
                            <td class="metric-high">97.44%</td>
                            <td>95</td>
                            <td>5</td>
                            <td>0</td>
                            <td>100</td>
                            <td>★ BEST</td>
                        </tr>
                        <tr>
                            <td><strong>0.35</strong></td>
                            <td class="metric-high">96.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-high">93.00%</td>
                            <td class="metric-high">96.37%</td>
                            <td>93</td>
                            <td>7</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Excellent</td>
                        </tr>
                        <tr>
                            <td><strong>0.40</strong></td>
                            <td class="metric-high">93.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-medium">87.00%</td>
                            <td class="metric-high">93.05%</td>
                            <td>87</td>
                            <td>13</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Good</td>
                        </tr>
                        <tr>
                            <td><strong>0.50</strong></td>
                            <td class="metric-medium">80.00%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-medium">60.00%</td>
                            <td class="metric-medium">75.00%</td>
                            <td>60</td>
                            <td>40</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Moderate</td>
                        </tr>
                        <tr class="worst-row">
                            <td><strong>0.60</strong></td>
                            <td class="metric-low">65.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-low">31.00%</td>
                            <td class="metric-low">47.33%</td>
                            <td>31</td>
                            <td>69</td>
                            <td>0</td>
                            <td>100</td>
                            <td>❌ Poor</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="insights-box">
                    <h3>Key Insights - Dataset 1</h3>
                    <ul>
                        <li><strong>0.30 achieves 97.50% accuracy</strong> - Best overall performance with perfect precision</li>
                        <li><strong>All thresholds maintain 100% precision</strong> - No false acceptances at any level</li>
                        <li><strong>Recall drops significantly after 0.40</strong> - From 87% to 60% to 31%</li>
                        <li><strong>0.60 rejects 69% of legitimate users</strong> - Completely impractical</li>
                        <li><strong>Sweet spot is 0.30-0.35</strong> - 96.5-97.5% accuracy range</li>
                    </ul>
                </div>
            </div>
            
            <!-- Detailed Comparison Table - Dataset 2 -->
            <div class="dataset-section">
                <h2 class="section-title">📊 Dataset 2 - Detailed Metrics Comparison</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Threshold</th>
                            <th>Accuracy</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1 Score</th>
                            <th>TP</th>
                            <th>FN</th>
                            <th>FP</th>
                            <th>TN</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="best-row">
                            <td><strong>0.30</strong></td>
                            <td class="metric-high">98.00%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-high">96.00%</td>
                            <td class="metric-high">97.96%</td>
                            <td>96</td>
                            <td>4</td>
                            <td>0</td>
                            <td>100</td>
                            <td>★ BEST</td>
                        </tr>
                        <tr>
                            <td><strong>0.35</strong></td>
                            <td class="metric-high">96.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-high">93.00%</td>
                            <td class="metric-high">96.37%</td>
                            <td>93</td>
                            <td>7</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Excellent</td>
                        </tr>
                        <tr>
                            <td><strong>0.40</strong></td>
                            <td class="metric-high">92.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-medium">85.00%</td>
                            <td class="metric-high">91.89%</td>
                            <td>85</td>
                            <td>15</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Good</td>
                        </tr>
                        <tr>
                            <td><strong>0.50</strong></td>
                            <td class="metric-medium">79.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-medium">59.00%</td>
                            <td class="metric-medium">74.21%</td>
                            <td>59</td>
                            <td>41</td>
                            <td>0</td>
                            <td>100</td>
                            <td>Moderate</td>
                        </tr>
                        <tr class="worst-row">
                            <td><strong>0.60</strong></td>
                            <td class="metric-low">69.50%</td>
                            <td class="metric-high">100.00%</td>
                            <td class="metric-low">39.00%</td>
                            <td class="metric-low">56.12%</td>
                            <td>39</td>
                            <td>61</td>
                            <td>0</td>
                            <td>100</td>
                            <td>❌ Poor</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="insights-box">
                    <h3>Key Insights - Dataset 2</h3>
                    <ul>
                        <li><strong>0.30 achieves 98.00% accuracy</strong> - Exceptional performance, even better than Dataset 1</li>
                        <li><strong>Perfect precision across all thresholds</strong> - Security is never compromised</li>
                        <li><strong>Recall degrades gracefully until 0.50</strong> - Sharp drop from 59% to 39% at 0.60</li>
                        <li><strong>0.60 rejects 61% of legitimate users</strong> - Still impractical despite better than Dataset 1</li>
                        <li><strong>Consistently better performance than Dataset 1</strong> - More separable features</li>
                    </ul>
                </div>
            </div>
            
            <!-- Side-by-Side Comparison -->
            <h2 class="section-title">📊 Side-by-Side Accuracy Comparison</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Threshold</th>
                        <th>Dataset 1 Accuracy</th>
                        <th>Dataset 2 Accuracy</th>
                        <th>Average</th>
                        <th>Difference</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="best-row">
                        <td><strong>0.30</strong></td>
                        <td class="metric-high">97.50%</td>
                        <td class="metric-high">98.00%</td>
                        <td class="metric-high">97.75%</td>
                        <td>+0.50%</td>
                    </tr>
                    <tr>
                        <td><strong>0.35</strong></td>
                        <td class="metric-high">96.50%</td>
                        <td class="metric-high">96.50%</td>
                        <td class="metric-high">96.50%</td>
                        <td>0.00%</td>
                    </tr>
                    <tr>
                        <td><strong>0.40</strong></td>
                        <td class="metric-high">93.50%</td>
                        <td class="metric-high">92.50%</td>
                        <td class="metric-high">93.00%</td>
                        <td>-1.00%</td>
                    </tr>
                    <tr>
                        <td><strong>0.50</strong></td>
                        <td class="metric-medium">80.00%</td>
                        <td class="metric-medium">79.50%</td>
                        <td class="metric-medium">79.75%</td>
                        <td>-0.50%</td>
                    </tr>
                    <tr class="worst-row">
                        <td><strong>0.60</strong></td>
                        <td class="metric-low">65.50%</td>
                        <td class="metric-low">69.50%</td>
                        <td class="metric-low">67.50%</td>
                        <td>+4.00%</td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Visualization Reference -->
            <div class="chart-placeholder">
                <h3>📈 Detailed Visualization</h3>
                <p style="margin: 20px 0;">Comprehensive charts have been generated showing:</p>
                <ul style="list-style: none; padding: 0;">
                    <li>✓ Accuracy trends across all thresholds</li>
                    <li>✓ Precision vs Recall trade-offs</li>
                    <li>✓ F1 Score optimization curves</li>
                    <li>✓ False Negatives progression</li>
                    <li>✓ Heatmap comparisons</li>
                </ul>
                <p style="margin-top: 20px; color: #667eea; font-weight: bold;">
                    📁 See: multi_threshold_comparison.png
                </p>
            </div>
            
            <!-- Final Recommendations -->
            <div class="insights-box" style="background: #e8f5e9; border-left-color: #27ae60;">
                <h3 style="color: #1e8449;">✅ Final Recommendations</h3>
                <h4>For Production Deployment:</h4>
                <ul>
                    <li><strong>Primary Recommendation: Threshold 0.30</strong>
                        <ul style="margin-left: 20px; list-style: disc;">
                            <li>Dataset 1: 97.50% accuracy, 100% precision, 95% recall</li>
                            <li>Dataset 2: 98.00% accuracy, 100% precision, 96% recall</li>
                            <li>Perfect security with excellent usability</li>
                        </ul>
                    </li>
                    <li><strong>Alternative: Threshold 0.35</strong>
                        <ul style="margin-left: 20px; list-style: disc;">
                            <li>96.50% accuracy on both datasets</li>
                            <li>Slightly more conservative, still excellent</li>
                            <li>Consider if extra security margin is desired</li>
                        </ul>
                    </li>
                    <li><strong>Viable Range: 0.30 - 0.40</strong>
                        <ul style="margin-left: 20px; list-style: disc;">
                            <li>All maintain 100% precision</li>
                            <li>Accuracy remains above 92%</li>
                            <li>Good balance of security and usability</li>
                        </ul>
                    </li>
                </ul>
                
                <h4 style="margin-top: 20px;">❌ Not Recommended:</h4>
                <ul>
                    <li><strong>Threshold 0.50:</strong> 79-80% accuracy - Too many false rejections (40-41%)</li>
                    <li><strong>Threshold 0.60:</strong> 65-70% accuracy - Completely impractical (60-70% rejection rate)</li>
                </ul>
            </div>
            
            <!-- Performance Summary -->
            <h2 class="section-title">📊 Performance Summary</h2>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 30px 0;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 5px solid #667eea;">
                    <h3 style="color: #667eea;">Best Threshold: 0.30</h3>
                    <p style="margin: 10px 0;"><strong>Why it wins:</strong></p>
                    <ul style="padding-left: 20px;">
                        <li>Highest accuracy (97.75% average)</li>
                        <li>Perfect precision (100%)</li>
                        <li>Excellent recall (95-96%)</li>
                        <li>Only 4-5% false rejection rate</li>
                        <li>Optimal balance for production</li>
                    </ul>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 5px solid #e74c3c;">
                    <h3 style="color: #e74c3c;">Worst Threshold: 0.60</h3>
                    <p style="margin: 10px 0;"><strong>Why it fails:</strong></p>
                    <ul style="padding-left: 20px;">
                        <li>Low accuracy (67.5% average)</li>
                        <li>Poor recall (31-39%)</li>
                        <li>60-70% false rejection rate</li>
                        <li>No benefit over 0.30 (same precision)</li>
                        <li>Unusable in practice</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>Analysis Date:</strong> October 24, 2025 | <strong>Model:</strong> InsightFace ArcFace (buffalo_l)</p>
            <p><strong>Thresholds Tested:</strong> 0.30, 0.35, 0.40, 0.50, 0.60</p>
            <p style="margin-top: 10px;">Generated Files: multi_threshold_comparison.json, multi_threshold_comparison.png</p>
        </div>
    </div>
</body>
</html>
